<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GXDiag - Pro Benchmark</title>
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        body { background: #050505; display: flex; flex-direction: column; height: 100vh; overflow: hidden; font-family: sans-serif; }
        .mod-header { padding: 15px 20px; background: #111; border-bottom: 1px solid #333; display: flex; align-items: center; justify-content: space-between;}
        .back-btn { text-decoration: none; color: #fff; font-weight: bold; }
        
        .bench-container { 
            flex-grow: 1; display: flex; flex-direction: column; align-items: center; 
            justify-content: center; gap: 20px; 
            background: radial-gradient(circle at center, #1a1a1a 0%, #000 100%); 
            overflow-y: auto; padding: 20px;
        }

        /* SCORE RING */
        .score-ring { width: 200px; height: 200px; border-radius: 50%; background: conic-gradient(#333 0% 100%); display: flex; align-items: center; justify-content: center; box-shadow: 0 0 50px rgba(0,0,0,0.8); transition: 0.5s; flex-shrink: 0; }
        .score-inner { width: 180px; height: 180px; background: #0a0a0a; border-radius: 50%; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .score-val { font-size: 3rem; font-weight: 800; color: #fff; }
        
        .progress-area { width: 80%; max-width: 400px; height: 6px; background: #333; border-radius: 3px; overflow: hidden; }
        .progress-fill { width: 0%; height: 100%; background: #00e5ff; transition: width 0.1s linear; }
        .start-btn { padding: 12px 40px; background: #00e5ff; color: #000; font-size: 1rem; font-weight: 900; border-radius: 30px; cursor: pointer; border: none; transition: 0.3s; }
        .start-btn:hover { box-shadow: 0 0 20px rgba(0, 229, 255, 0.4); }
        .start-btn:disabled { background: #333; color: #555; cursor: not-allowed; box-shadow: none; }

        .verdict { font-size: 1.2rem; font-weight: bold; color: #fff; text-transform: uppercase; letter-spacing: 2px; height: 25px; margin-top: -10px; }
        .verdict.show { animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes popIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }

        /* LEGEND TABLE */
        .legend-box {
            background: #151515; border: 1px solid #333; border-radius: 12px;
            padding: 15px; width: 90%; max-width: 500px; margin-top: 10px;
        }
        .legend-title { font-size: 0.8rem; color: #888; text-transform: uppercase; margin-bottom: 10px; border-bottom: 1px solid #333; padding-bottom: 5px; text-align: center; }
        .tier-row { display: flex; justify-content: space-between; font-size: 0.85rem; padding: 6px 0; border-bottom: 1px solid #222; }
        .tier-row:last-child { border-bottom: none; }
        .t-score { font-family: monospace; color: #aaa; }
        .t-desc { font-weight: bold; }
        
        .c-low { color: #ff4081; } .c-mid { color: #ffb300; }
        .c-high { color: #00ff88; } .c-god { color: #00e5ff; }
        .tier-row.active { background: rgba(255,255,255,0.1); padding-left: 10px; padding-right: 10px; border-radius: 4px; }
        
        .platform-tag {
            background: #222; padding: 5px 15px; border-radius: 20px; font-size: 0.75rem; 
            color: #888; border: 1px solid #333; margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <div class="mod-header">
        <a href="../../index.html" class="back-btn">‚Üê DASHBOARD</a>
        <div style="font-size:0.8rem; color:#666;">JS SINGLE CORE</div>
    </div>

    <div class="bench-container">
        
        <div class="platform-tag" id="platform-badge">Detecting Device...</div>

        <div class="score-ring" id="ring">
            <div class="score-inner">
                <div class="score-val" id="score">0</div>
                <div style="font-size:0.7rem; color:#888;">GX SCORE</div>
            </div>
        </div>

        <div class="verdict" id="verdict-text"></div>
        <div style="color:#00e5ff; font-size:0.9rem;" id="status">Ready</div>
        
        <div class="progress-area"><div class="progress-fill" id="prog-bar"></div></div>
        
        <button class="start-btn" id="btn-run" onclick="startBenchmark()">START TEST</button>

        <div class="legend-box">
            <div class="legend-title" id="legend-header">üìä PERFORMANCE INDEX</div>
            <div class="tier-row" id="row-low">
                <span class="t-desc c-low">ü•î Entry Level</span>
                <span class="t-score" id="lbl-low">...</span>
            </div>
            <div class="tier-row" id="row-mid">
                <span class="t-desc c-mid">üì± Mid Range</span>
                <span class="t-score" id="lbl-mid">...</span>
            </div>
            <div class="tier-row" id="row-high">
                <span class="t-desc c-high">üöÄ High Performance</span>
                <span class="t-score" id="lbl-high">...</span>
            </div>
            <div class="tier-row" id="row-god">
                <span class="t-desc c-god">üëΩ Godlike / Pro</span>
                <span class="t-score" id="lbl-god">...</span>
            </div>
        </div>
    </div>

    <script>
        const btn = document.getElementById('btn-run');
        const status = document.getElementById('status');
        const prog = document.getElementById('prog-bar');
        const scoreDisplay = document.getElementById('score');
        const ring = document.getElementById('ring');
        const verdictText = document.getElementById('verdict-text');
        
        // --- 1. SMART DEVICE DETECTION ---
        let isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        
        // Konfigurasi Skor (Mobile vs Desktop)
        // Desktop JS Engine (V8 di PC) jauh lebih cepat, jadi standarnya kita naikkan 4x lipat
        const tiers = {
            mobile: { low: 1500, mid: 3000, high: 5000 },
            desktop: { low: 6000, mid: 12000, high: 20000 }
        };
        
        const activeTier = isMobile ? tiers.mobile : tiers.desktop;

        // Init UI berdasarkan Device
        function initUI() {
            document.getElementById('platform-badge').innerText = isMobile ? "üì± MOBILE MODE" : "üíª DESKTOP MODE";
            
            document.getElementById('lbl-low').innerText = `< ${activeTier.low}`;
            document.getElementById('lbl-mid').innerText = `${activeTier.low} - ${activeTier.mid}`;
            document.getElementById('lbl-high').innerText = `${activeTier.mid} - ${activeTier.high}`;
            document.getElementById('lbl-god').innerText = `> ${activeTier.high}`;
        }
        initUI();

        // --- 2. BENCHMARK LOGIC ---
        function isPrime(num) {
            for (let i = 2, s = Math.sqrt(num); i <= s; i++) if (num % i === 0) return false;
            return num > 1;
        }

        function startBenchmark() {
            btn.disabled = true; scoreDisplay.innerText = "0"; prog.style.width = "0%";
            verdictText.innerText = ""; ring.style.background = `conic-gradient(#333 0% 100%)`;
            document.querySelectorAll('.tier-row').forEach(r => r.classList.remove('active'));

            let count = 0; let num = 2; const duration = 5000; const start = performance.now();
            
            function loop() {
                const now = performance.now();
                const elapsed = now - start;
                prog.style.width = Math.min(100, (elapsed / duration) * 100) + "%";
                status.innerText = `Testing CPU... ${(duration - elapsed).toFixed(0)}ms`;

                const chunkEnd = now + 15; 
                while (performance.now() < chunkEnd) {
                    if(isPrime(num)) count++;
                    num++;
                }

                if (elapsed < duration) requestAnimationFrame(loop);
                else finish(count);
            }
            requestAnimationFrame(loop);
        }

        function finish(count) {
            btn.disabled = false; status.innerText = "Done."; prog.style.width = "100%";
            
            // Raw Score (Sama untuk semua platform)
            const finalScore = Math.round(count * 0.05);
            
            let current = 0;
            const anim = setInterval(() => {
                current += Math.ceil(finalScore/50);
                if(current >= finalScore) { current = finalScore; clearInterval(anim); }
                scoreDisplay.innerText = current;
            }, 20);

            // Verdict Logic (Menggunakan Active Tier yang sudah dideteksi di awal)
            let color = "#333"; let vText = ""; let rowId = "";

            if (finalScore < activeTier.low) {
                color = "#ff4081"; vText = "POTATO"; rowId = "row-low";
            } else if (finalScore < activeTier.mid) {
                color = "#ffb300"; vText = "DECENT"; rowId = "row-mid";
            } else if (finalScore < activeTier.high) {
                color = "#00ff88"; vText = "FAST"; rowId = "row-high";
            } else {
                color = "#00e5ff"; vText = "BEAST"; rowId = "row-god";
            }

            ring.style.background = `conic-gradient(${color} 0% 100%)`;
            ring.style.boxShadow = `0 0 30px ${color}80`;
            verdictText.innerText = vText;
            verdictText.style.color = color;
            verdictText.classList.add('show');
            setTimeout(() => verdictText.classList.remove('show'), 1000);
            document.getElementById(rowId).classList.add('active');
        }
    </script>
</body>
</html>
