<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GXDiag - Game ID Checker</title>
    <link rel="stylesheet" href="../../css/style.css">
    <style>
        body { background: #0b0b0b; display: flex; flex-direction: column; height: 100vh; overflow: hidden; }
        
        .mod-header {
            padding: 15px 20px; background: #111; border-bottom: 1px solid #333; 
            display: flex; align-items: center; justify-content: space-between;
        }
        .back-btn { text-decoration: none; color: #fff; font-weight: bold; }

        .container {
            flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; 
            padding: 20px; gap: 20px; width: 100%; max-width: 500px; margin: 0 auto;
        }

        /* GAME SELECTOR */
        .game-select {
            display: flex; gap: 10px; overflow-x: auto; width: 100%; padding-bottom: 5px;
            scrollbar-width: none; justify-content: flex-start;
        }
        .game-select::-webkit-scrollbar { display: none; }
        
        .game-opt {
            background: #1a1a1a; border: 1px solid #333; padding: 10px 15px; border-radius: 10px;
            cursor: pointer; display: flex; align-items: center; gap: 8px; min-width: 120px; transition: 0.2s;
        }
        .game-opt img { width: 24px; height: 24px; border-radius: 5px; } /* Placeholder for icons */
        .game-opt span { font-size: 0.85rem; font-weight: bold; color: #888; white-space: nowrap; }
        
        .game-opt.active { background: #00e5ff; border-color: #00e5ff; }
        .game-opt.active span { color: #000; }

        /* INPUT AREA */
        .input-box {
            width: 100%; background: #151515; padding: 20px; border-radius: 15px; 
            border: 1px solid #333; display: flex; flex-direction: column; gap: 15px;
        }
        
        .form-group { display: flex; flex-direction: column; gap: 5px; }
        .form-label { font-size: 0.75rem; color: #00e5ff; text-transform: uppercase; font-weight: bold; }
        
        input, select {
            background: #222; border: 1px solid #444; color: #fff; padding: 12px; 
            border-radius: 8px; outline: none; font-size: 1rem; width: 100%;
        }
        input:focus { border-color: #00e5ff; }

        /* DOUBLE INPUT (For MLBB Zone) */
        .dual-input { display: flex; gap: 10px; }
        .w-70 { flex: 7; }
        .w-30 { flex: 3; }

        .check-btn {
            background: #00e5ff; color: #000; font-weight: bold; padding: 15px; 
            border: none; border-radius: 10px; cursor: pointer; font-size: 1rem; transition: 0.2s;
            display: flex; align-items: center; justify-content: center; gap: 10px;
        }
        .check-btn:disabled { background: #333; color: #555; cursor: not-allowed; }

        /* RESULT CARD */
        .result-card {
            width: 100%; background: #1a1a1a; border-radius: 15px; padding: 20px;
            border: 1px solid #333; display: none; position: relative; overflow: hidden;
        }
        .result-card.success { border-color: #00ff88; display: block; animation: slideUp 0.3s; }
        .result-card.error { border-color: #ff4081; display: block; animation: shake 0.3s; }

        @keyframes slideUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
        @keyframes shake { 0%{transform: translateX(0)} 25%{transform: translateX(5px)} 50%{transform: translateX(-5px)} 100%{transform: translateX(0)} }

        .res-label { font-size: 0.7rem; color: #888; }
        .res-nick { font-size: 1.5rem; color: #fff; font-weight: 800; margin: 5px 0 15px 0; }
        .res-id { font-family: monospace; color: #00e5ff; background: rgba(0,229,255,0.1); padding: 5px 10px; border-radius: 5px; display: inline-block; }

        .copy-btn {
            position: absolute; top: 15px; right: 15px;
            background: #222; border: 1px solid #444; color: #fff; 
            padding: 5px 12px; border-radius: 5px; font-size: 0.7rem; cursor: pointer;
        }
    </style>
</head>
<body>

    <div class="mod-header">
        <a href="../../index.html" class="back-btn">‚Üê DASHBOARD</a>
        <div style="font-size:0.9rem; color:#888;">ID CHECKER</div>
    </div>

    <div class="container">
        
        <div class="game-select">
            <div class="game-opt active" onclick="setGame('mlbb')"><span>Mobile Legends</span></div>
            <div class="game-opt" onclick="setGame('ff')"><span>Free Fire</span></div>
            <div class="game-opt" onclick="setGame('pubgm')"><span>PUBG Mobile</span></div>
            <div class="game-opt" onclick="setGame('genshin')"><span>Genshin Impact</span></div>
            </div>

        <div class="input-box">
            <div class="form-group" id="input-group">
                </div>
            <button class="check-btn" id="btn-check" onclick="checkID()">
                üîç CHECK VALIDITY
            </button>
        </div>

        <div id="result-area" class="result-card">
            </div>

    </div>

    <script>
        // CONFIG
        const games = {
            'mlbb': { 
                name: 'Mobile Legends', 
                fields: ['id', 'zone'], 
                apiSlug: 'mobile-legends', // Slug untuk API isan
                placeholder: ['User ID (e.g 12345678)', 'Zone (e.g 1234)'] 
            },
            'ff': { 
                name: 'Free Fire', 
                fields: ['id'], 
                apiSlug: 'free-fire',
                placeholder: ['Player ID (e.g 123456789)'] 
            },
            'pubgm': { 
                name: 'PUBG Mobile', 
                fields: ['id'], 
                apiSlug: 'pubg-mobile',
                placeholder: ['Character ID (e.g 512345678)'] 
            },
            'genshin': { 
                name: 'Genshin Impact', 
                fields: ['id', 'server'], 
                apiSlug: 'genshin-impact',
                placeholder: ['UID', 'Select Server'] 
            }
        };

        let activeGame = 'mlbb';

        function setGame(key) {
            activeGame = key;
            
            // Update UI Tabs
            document.querySelectorAll('.game-opt').forEach(el => el.classList.remove('active'));
            event.currentTarget.classList.add('active');

            // Reset Result
            document.getElementById('result-area').className = 'result-card';
            document.getElementById('result-area').style.display = 'none';

            // Render Inputs
            const group = document.getElementById('input-group');
            const conf = games[key];
            let html = '';

            if(key === 'mlbb') {
                html = `
                    <div class="form-label">ACCOUNT DETAILS</div>
                    <div class="dual-input">
                        <input type="number" id="inp-id" class="w-70" placeholder="${conf.placeholder[0]}">
                        <input type="number" id="inp-zone" class="w-30" placeholder="${conf.placeholder[1]}">
                    </div>`;
            } else if (key === 'genshin') {
                html = `
                    <div class="form-label">UID & SERVER</div>
                    <div class="dual-input">
                        <input type="number" id="inp-id" class="w-70" placeholder="${conf.placeholder[0]}">
                        <select id="inp-zone" class="w-30">
                            <option value="os_asia">Asia</option>
                            <option value="os_usa">NA</option>
                            <option value="os_euro">EU</option>
                        </select>
                    </div>`;
            } else {
                html = `
                    <div class="form-label">PLAYER ID</div>
                    <input type="number" id="inp-id" placeholder="${conf.placeholder[0]}">`;
            }
            group.innerHTML = html;
        }

        async function checkID() {
            const btn = document.getElementById('btn-check');
            const resArea = document.getElementById('result-area');
            const idVal = document.getElementById('inp-id').value;
            const zoneVal = document.getElementById('inp-zone') ? document.getElementById('inp-zone').value : '';

            // Basic Validation
            if(!idVal) { alert("Please enter ID"); return; }
            if(activeGame === 'mlbb' && !zoneVal) { alert("Please enter Zone ID"); return; }

            // UI Loading
            btn.innerHTML = "‚è≥ CONNECTING TO SERVER...";
            btn.disabled = true;
            resArea.style.display = 'none';

            try {
                // --- API CALL ---
                // Menggunakan Public API (isan.eu.org). 
                // Note: Jika API ini down, kita harus ganti provider atau pakai mock data.
                
                let url = '';
                if(activeGame === 'mlbb') {
                    url = `https://api.isan.eu.org/nickname/mobile-legends?id=${idVal}&zone=${zoneVal}`;
                } else if(activeGame === 'ff') {
                    url = `https://api.isan.eu.org/nickname/free-fire?id=${idVal}`;
                } else if(activeGame === 'pubgm') {
                    url = `https://api.isan.eu.org/nickname/pubg-mobile?id=${idVal}`;
                } else {
                    // Fallback untuk game yg API-nya belum support di endpoint ini
                    throw new Error("Game server not responding (API limit)");
                }

                const req = await fetch(url);
                const data = await req.json();

                if(data.success === true && data.name) {
                    // SUKSES
                    showResult(true, data.name, idVal, zoneVal);
                } else {
                    // GAGAL
                    throw new Error("ID Not Found");
                }

            } catch (e) {
                // ERROR HANDLER
                console.error(e);
                showResult(false, "Invalid ID / Server Error");
            } finally {
                btn.innerHTML = "üîç CHECK VALIDITY";
                btn.disabled = false;
            }
        }

        function showResult(isSuccess, nameOrError, id, zone) {
            const el = document.getElementById('result-area');
            const fullID = zone ? `${id} (${zone})` : id;

            if(isSuccess) {
                el.className = 'result-card success';
                el.innerHTML = `
                    <button class="copy-btn" onclick="copyText('${nameOrError}')">COPY NICK</button>
                    <div class="res-label">VALID ACCOUNT FOUND</div>
                    <div class="res-nick">${nameOrError}</div>
                    <div class="res-label">ID REGISTERED</div>
                    <div class="res-id">${fullID}</div>
                `;
            } else {
                el.className = 'result-card error';
                el.innerHTML = `
                    <div class="res-label" style="color:#ff4081">ERROR</div>
                    <div class="res-nick" style="font-size:1.2rem">${nameOrError}</div>
                    <div style="font-size:0.8rem; color:#666">Check ID numbers or try again later.</div>
                `;
            }
        }

        function copyText(txt) {
            navigator.clipboard.writeText(txt);
            alert("Nickname Copied!");
        }

        // Init Default
        setGame('mlbb');

    </script>
</body>
</html>
